# Python package
# Create and test a Python package on multiple Python versions.
# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python
# parameters:
#   - name: LoopList
#     type: object
#     default: $[ 5 ]



pool:
  vmImage: 'windows-latest'

variables:
  - name: SomeNumber
    value: 5
  - name: SomeList

steps:
- task: PythonScript@0
  inputs:
    scriptSource: 'inline'
    script: |
      import sys
      x=""
      for i in range(1, int(sys.argv[1])):
        x+= f'\"{i}\",'
      x+= f'\"{int(sys.argv[1])}\"'
      with open('temp.bat', 'w') as bat:
        bat.write(f"echo \"##vso[task.setvariable variable=TestVal]"1", "2", "3"")
    arguments: '$(SomeNumber)'
- task: BatchScript@1
  inputs:
    filename: 'temp.bat'
    modifyEnvironment: true
- template: azure_template.yaml
  parameters:
    param: [$(TestVal)]
